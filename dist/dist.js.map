{"version":3,"sources":["../src/componentManager.js"],"names":["ComponentManager","permissions","onReady","sentMessages","messageQueue","loggingEnabled","onReadyCallback","window","addEventListener","event","console","log","data","handleMessage","bind","payload","action","sessionKey","componentData","activateThemes","themes","original","originalMessage","filter","message","messageId","callback","postMessage","key","value","push","generateUUID","api","sentMessage","JSON","parse","stringify","parent","type","width","height","contentType","content_types","items","streamedItems","filteredItems","item","localCopy","streamItems","candidate","uuid","updated_at","streamedContextItem","streamContextItem","jsonObjectForItem","associateItem","content_type","deleteItems","params","map","saveItems","Date","copy","Object","assign","children","urls","deactivateAllCustomThemes","url","link","document","createElement","href","rel","media","className","getElementsByTagName","appendChild","elements","getElementsByClassName","forEach","call","element","disabled","parentNode","removeChild","crypto","msCrypto","buf","Uint32Array","getRandomValues","idx","replace","c","r","v","toString","d","getTime","performance","now","Math","random","floor","module","exports"],"mappings":"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","file":"dist.js","sourcesContent":["class ComponentManager {\n\n  constructor(permissions, onReady) {\n    this.sentMessages = [];\n    this.messageQueue = [];\n    this.permissions = permissions;\n    this.loggingEnabled = false;\n    this.onReadyCallback = onReady;\n\n    window.addEventListener(\"message\", function(event){\n      if(this.loggingEnabled) {\n        console.log(\"Components API Message received:\", event.data);\n      }\n      this.handleMessage(event.data);\n    }.bind(this), false);\n  }\n\n  handleMessage(payload) {\n    if(payload.action === \"component-registered\") {\n      this.sessionKey = payload.sessionKey;\n      this.componentData = payload.componentData;\n      this.onReady();\n\n      if(this.loggingEnabled) {\n        console.log(\"Component successfully registered with payload:\", payload);\n      }\n\n    } else if(payload.action === \"themes\") {\n      this.activateThemes(payload.data.themes);\n    }\n\n    else if(payload.original) {\n      // get callback from queue\n      var originalMessage = this.sentMessages.filter(function(message){\n        return message.messageId === payload.original.messageId;\n      })[0];\n\n      if(originalMessage.callback) {\n        originalMessage.callback(payload.data);\n      }\n    }\n  }\n\n  onReady() {\n    for(var message of this.messageQueue) {\n      this.postMessage(message.action, message.data, message.callback);\n    }\n    this.messageQueue = [];\n\n    if(this.onReadyCallback) {\n      this.onReadyCallback();\n    }\n  }\n\n  setComponentDataValueForKey(key, value) {\n    this.componentData[key] = value;\n    this.postMessage(\"set-component-data\", {componentData: this.componentData}, function(data){});\n  }\n\n  clearComponentData() {\n    this.componentData = {};\n    this.postMessage(\"set-component-data\", {componentData: this.componentData}, function(data){});\n  }\n\n  componentDataValueForKey(key) {\n    return this.componentData[key];\n  }\n\n  postMessage(action, data, callback) {\n    if(!this.sessionKey) {\n      this.messageQueue.push({\n        action: action,\n        data: data,\n        callback: callback\n      });\n      return;\n    }\n\n    var message = {\n      action: action,\n      data: data,\n      messageId: this.generateUUID(),\n      sessionKey: this.sessionKey,\n      permissions: this.permissions,\n      api: \"component\"\n    }\n\n    var sentMessage = JSON.parse(JSON.stringify(message));\n    sentMessage.callback = callback;\n    this.sentMessages.push(sentMessage);\n\n    if(this.loggingEnabled) {\n      console.log(\"Posting message:\", message);\n    }\n\n    window.parent.postMessage(message, '*');\n  }\n\n  setSize(type, width, height) {\n    this.postMessage(\"set-size\", {type: type, width: width, height: height}, function(data){\n\n    })\n  }\n\n  streamItems(contentType) {\n    this.postMessage(\"stream-items\", {content_types: [contentType]}, function(data){\n      var items = data.items;\n      if(this.streamedItems) {\n        var filteredItems = items.filter((item) => {\n          var localCopy = this.streamItems.filter((candidate) => {return candidate.uuid == item.uuid });\n          // If a local copy doesn't exist, it's probably a new item, so we want to return it.\n          if(!localCopy) {\n            return true;\n          } else {\n            // The incoming timestamp should be greater than our last saved timestamp\n            return item.updated_at > localCopy.updated_at;\n          }\n        })\n        // All items should be saved, but only the filtered items should be sent back to the callback\n        this.streamItems = items;\n        callback(filteredItems);\n      } else {\n        this.streamItems = items;\n        callback(items);\n      }\n    }.bind(this));\n  }\n\n  streamContextItem(callback) {\n    this.postMessage(\"stream-context-item\", null, (data) => {\n      var item = data.item;\n      /*\n        When an item is saved via saveItem, its updated_at value is set client side to the current date.\n        If we make a change locally, then for whatever reason receive an item via streamItems/streamContextItem,\n        we want to ignore that change if it was made prior to the latest change we've made.\n      */\n      if(this.streamedContextItem && this.streamContextItem.uuid == item.uuid && this.streamedContextItem.updated_at > item.updated_at) {\n        return;\n      }\n      this.streamedContextItem = item;\n      callback(item);\n    });\n  }\n\n  selectItem(item) {\n    this.postMessage(\"select-item\", {item: this.jsonObjectForItem(item)});\n  }\n\n  createItem(item) {\n    this.postMessage(\"create-item\", {item: this.jsonObjectForItem(item)}, function(data){\n      var item = data.item;\n      this.associateItem(item);\n    }.bind(this));\n  }\n\n  associateItem(item) {\n    this.postMessage(\"associate-item\", {item: this.jsonObjectForItem(item)});\n  }\n\n  deassociateItem(item) {\n    this.postMessage(\"deassociate-item\", {item: this.jsonObjectForItem(item)});\n  }\n\n  clearSelection() {\n    this.postMessage(\"clear-selection\", {content_type: \"Tag\"});\n  }\n\n  deleteItem(item) {\n    this.deleteItems([item]);\n  }\n\n  deleteItems(items) {\n    var params = {\n      items: items.map(function(item){\n        return this.jsonObjectForItem(item);\n      }.bind(this))\n    };\n    this.postMessage(\"delete-items\", params);\n  }\n\n  saveItem(item) {\n    this.saveItems([item]);\n  }\n\n  saveItems(items) {\n    items = items.map(function(item) {\n      item.updated_at = new Date();\n      return this.jsonObjectForItem(item);\n    }.bind(this));\n\n    this.postMessage(\"save-items\", {items: items}, function(data){\n\n    });\n  }\n\n  jsonObjectForItem(item) {\n    var copy = Object.assign({}, item);\n    copy.children = null;\n    copy.parent = null;\n    return copy;\n  }\n\n\n  /* Themes */\n\n  activateThemes(urls) {\n    this.deactivateAllCustomThemes();\n\n    if(this.loggingEnabled) {\n      console.log(\"Activating themes:\", urls);\n    }\n\n    if(!urls) {\n      return;\n    }\n\n    for(var url of urls) {\n      if(!url) {\n        continue;\n      }\n\n      var link = document.createElement(\"link\");\n      link.href = url;\n      link.type = \"text/css\";\n      link.rel = \"stylesheet\";\n      link.media = \"screen,print\";\n      link.className = \"custom-theme\";\n      document.getElementsByTagName(\"head\")[0].appendChild(link);\n    }\n  }\n\n  deactivateAllCustomThemes() {\n    var elements = document.getElementsByClassName(\"custom-theme\");\n\n    [].forEach.call(elements, function (element) {\n      if(element) {\n        element.disabled = true;\n        element.parentNode.removeChild(element);\n      }\n    });\n  }\n\n\n  /* Utilities */\n\n\n  generateUUID() {\n    var crypto = window.crypto || window.msCrypto;\n    if(crypto) {\n      var buf = new Uint32Array(4);\n      crypto.getRandomValues(buf);\n      var idx = -1;\n      return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n          idx++;\n          var r = (buf[idx>>3] >> ((idx%8)*4))&15;\n          var v = c == 'x' ? r : (r&0x3|0x8);\n          return v.toString(16);\n      });\n    } else {\n      var d = new Date().getTime();\n      if(window.performance && typeof window.performance.now === \"function\"){\n        d += performance.now(); //use high-precision timer if available\n      }\n      var uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n        var r = (d + Math.random()*16)%16 | 0;\n        d = Math.floor(d/16);\n        return (c=='x' ? r : (r&0x3|0x8)).toString(16);\n      });\n      return uuid;\n    }\n  }\n}\n\n\nif(typeof module != \"undefined\" && typeof module.exports != \"undefined\") {\n  module.exports = ComponentManager;\n}\n\nif(window) {\n  window.ComponentManager = ComponentManager;\n}\n"]}